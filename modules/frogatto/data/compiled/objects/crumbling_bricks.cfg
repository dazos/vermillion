{
	"activation_area": 100,
	"animation": [
		{
			"duration": 10000000,
			"feet_x": 24,
			"feet_y": 32,
			"id": "health4",
			"image": "props/crumbling-bricks.png",
			"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
			"rect": [0,0,47,47]
		},
		{
			"duration": 10000000,
			"feet_x": 24,
			"feet_y": 32,
			"id": "health3",
			"image": "props/crumbling-bricks.png",
			"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
			"rect": [48,0,95,47]
		},
		{
			"duration": 10000000,
			"feet_x": 24,
			"feet_y": 32,
			"id": "health2",
			"image": "props/crumbling-bricks.png",
			"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
			"rect": [96,0,143,47]
		},
		{
			"duration": 10000000,
			"feet_x": 24,
			"feet_y": 32,
			"id": "health1",
			"image": "props/crumbling-bricks.png",
			"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
			"rect": [144,0,191,47]
		},
		{
			"duration": 10000000,
			"feet_x": 24,
			"feet_y": 32,
			"id": "health0",
			"image": "props/crumbling-bricks.png",
			"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
			"rect": [144,0,191,47]
		}
	],
	"editor_info": {
		"category": "props",
		"var": [
			{
				"name": "delay_rise",
				"value": 50
			},
			{
				"name": "delay_fall",
				"value": 70
			}
		]
	},
	"hitpoints": 300,
	"id": "crumbling_bricks",
	"object_type": {
		"animation": [
			{
				"accel_y": 40,
				"body_area": null,
				"duration": 5,
				"frames": 6,
				"id": "normal",
				"image": "effects/particles3.png",
				"pad": 3,
				"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
				"rect": [1,221,17,237]
			},
			{
				"accel_y": 40,
				"body_area": null,
				"duration": 100,
				"frames": 1,
				"id": "settled",
				"image": "effects/particles3.png",
				"pad": 3,
				"palettes": ["chrome_to_brass","dungeon_blue","dungeon_gloom","dungeon_green","dungeon_moonlit","dungeon_rusty","dungeon_teal","dungeon_mossy","dungeon_violet"],
				"rect": [1,221,17,237]
			}
		],
		"dies_on_inactive": true,
		"friction": 2000,
		"has_feet": false,
		"id": "chunk",
		"load_variations": "big",
		"on_collide_feet": "[set(velocity_y, -(velocity_y*600)/1000),if(velocity_y < 200 and animation='normal', animation('settled')),if(velocity_y < 40, set(velocity_y,0))]",
		"on_collide_side": "set(velocity_x, -(velocity_x*850)/1000)",
		"on_create": "[animation('normal'),set(velocity_x, (1d500-250)), set(velocity_y, -1d100+200), set(rotate, 1d4*90), 
			]",
		"on_die": "spawn('breakable_block_chunk.particle_system_holder', x,y,facing)",
		"on_end_anim": "animation('normal')",
		"on_end_settled_anim": "die()",
		"on_enter_water": "animation('settled')",
		"on_timer": "if(animation in ['normal'],add(rotate, 15))",
		"solid_area": [9,9,10,10],
		"solid_dimensions": ["effects"],
		"timer_frequency": 5,
		"variations": {
			"big": "[map(filter(doc.animation, value.rect = [1,221,17,237]), 'anim', set(anim.rect, [1,201,17,217]))]"
		},
		"zorder": 12
	},
	"on_create": "[animation('health4'),set(facing,if(1d2=2,1,-1))]",
	"on_die": "[spawn('breakable_block_chunk.particle_system_holder', x,y,facing),
			sound('BlockBreak.ogg'),
			map([0]*3d2, spawn('crumbling_bricks.chunk',mid_x, mid_y+1d10, if(1d2=2,1,-1))),
			map([0]*1d2, spawn('crumbling_bricks.chunk',mid_x, mid_y+1d10, if(1d2=2,1,-1), add(variations, ['big'])))
			]",
	"on_process": "if(level.player.standing_on = me, [add(hitpoints,-crumble_per_cycle),pick_animation(), if(cycle%5=0 and 1d2=2,spawn('crumbling_bricks.chunk',mid_x, mid_y+1d10, if(1d2=2,1,-1))  )])",
	"platform_area": [16,16,31,17],
	"properties": {
		"crumble_per_cycle": "if(level.player.difficulty > level.player.difficulty_casual, 10, 2)",
		"pick_animation": "def() animation('health'+((hitpoints/100)+1))"
	},
	"vars": {
		"delay_fall": null,
		"delay_rise": null
	},
	"zorder": -1
}